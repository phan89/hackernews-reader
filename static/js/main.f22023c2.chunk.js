(this["webpackJsonphackernews-reader"]=this["webpackJsonphackernews-reader"]||[]).push([[0],{235:function(e,n,t){e.exports=t(455)},455:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),o=t(66),i=t.n(o),c=t(7),u=t(8),s=t(11),l=t(10),f=t(12),h=t(13),d=t(4),p=t(5),m="@media only screen and (max-width: 768px)";function g(){var e=Object(p.a)(["\n  width: 50%;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  overflow: hidden;\n  padding-bottom: 200px;\n  "," {\n    width: 96%;\n  }\n"]);return g=function(){return e},e}var b=d.default.div(g(),m),S=t(14);function E(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: auto;\n  width: 100%;\n"]);return E=function(){return e},e}function O(){var e=Object(p.a)(["\n  width: ","px;\n  height: ","px;\n  fill: ",";\n"]);return O=function(){return e},e}function y(){var e=Object(p.a)(["\n  margin-left: auto;\n  margin-right: 0.5em;\n"]);return y=function(){return e},e}function v(){var e=Object(p.a)(["\n  display: flex;\n  cursor: pointer;\n  font-size: ","px;\n  color: ",";\n  align-items: center;\n  text-align: center;\n  margin-top: 0.1em;\n\n  > a {\n    display: flex;\n    color: ",";\n  }\n"]);return v=function(){return e},e}function _(){var e=Object(p.a)(["\n  display: flex;\n  order: 2;\n  width: 100%;\n  max-width: 12em;\n  margin-left: auto;\n"]);return _=function(){return e},e}function T(){var e=Object(p.a)(["\nfloat: left; \nwidth: 400px;\n}\n"]);return T=function(){return e},e}function j(){var e=Object(p.a)(["\n  display: flex;\n"]);return j=function(){return e},e}function x(){var e=Object(p.a)(["\n  color: ",";\n  font-size: 22px;\n  "," {\n    font-size: 18px;\n  }\n  font-weight: 400;\n  display: flex;\n  text-align: center;\n  align-items: center;\n  margin-left: 10px;\n"]);return x=function(){return e},e}function C(){var e=Object(p.a)(["\n  background-color: ",";\n  height: ","px;\n  width: 100%;\n  display: flex;\n  padding: 12px;\n  border-bottom: solid 1px ",";\n  padding-right: 0px;\n"]);return C=function(){return e},e}var I=d.default.header(C(),(function(e){return e.theme.background.secondary}),60,(function(e){return e.theme.border})),k=d.default.h1(x(),(function(e){return e.theme.text.primary}),m),A=d.default.a(j()),P=Object(d.default)(A)(T()),F=d.default.div(_()),R=d.default.div(v(),28,(function(e){return e.theme.text.secondary}),(function(e){return e.theme.text.secondary})),w=Object(d.default)(R)(y()),D=d.default.svg(O(),36,36,(function(e){return e.theme.logo.color})),M=d.default.div(E());function L(){var e=Object(p.a)(["\n  font-size: ","px;\n  margin-right: 4px;\n"]);return L=function(){return e},e}function H(){var e=Object(p.a)(["\n  font-size: ","px;\n"]);return H=function(){return e},e}function U(){var e=Object(p.a)(["\n  display: flex;\n  padding: 0 8px;\n"]);return U=function(){return e},e}function B(){var e=Object(p.a)(["\n  display: flex;\n  cursor: pointer;\n  font-size: ","px;\n  color: ",";\n  align-items: center;\n  text-align: center;\n  padding-right: 6px;\n\n  > a {\n    display: flex;\n    color: ",";\n  }\n"]);return B=function(){return e},e}function G(){var e=Object(p.a)(["\n  margin-left: auto;\n  padding: 0 0 12px 16px;\n"]);return G=function(){return e},e}function N(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return N=function(){return e},e}function V(){var e=Object(p.a)(["\n  padding-right: 0.5em;\n  flex-direction: column;\n  box-shadow: -1px 3px 10px 1px ",";\n  background-color: ",";\n"]);return V=function(){return e},e}function z(){var e=Object(p.a)(["\n  display: ",";\n  flex-direction: column;\n  background: transparent;\n  padding-top: 20px;\n  z-index: 1000;\n  padding-right: 0.05em;\n"]);return z=function(){return e},e}var Y=d.default.div(z(),(function(e){return e.mainMenuVisible?"flex":"none"})),Q=d.default.div(V(),(function(e){return e.theme.box_shadow}),(function(e){return e.theme.background.primary})),W=d.default.ul(N()),K=d.default.li(G()),J=d.default.div(B(),14,(function(e){return e.theme.text.secondary}),(function(e){return e.theme.text.secondary})),$=(d.default.div(U()),d.default.span(H(),14),d.default.span(L(),14)),q=t(41),X=t(143),Z={dark:{name:"dark",background:{primary:"#000",secondary:"#0d0a08"},text:{primary:"#bfbebe",secondary:"#848886",disabled:""},hot:{primary:"#ff0000",secondary:"#af0404"},warning:{primary:"#bfbebe",secondary:"#848886"},error:{primary:"#bfbebe",secondary:"#848886"},border:"#272727",box_shadow:"#4B4B4B",logo:{color:"#f57b51"},chatbox:{background:"#331400"},hover:{brightness:"200%",linkColor:""}},light:{name:"light",background:{primary:"#f9f9f9",secondary:"#f3f3f3"},text:{primary:"#000000",secondary:"#0f4c81",disabled:"",primaryHover:"#ff0000"},hot:{primary:"#ff0000",secondary:"#af0404"},warning:{primary:"#bfbebe",secondary:"#848886"},error:{primary:"#bfbebe",secondary:"#848886"},border:"#272727",box_shadow:"#7d7d7d",logo:{color:"#f57b51"},chatbox:{background:"#fff0f0"},hover:{brightness:"95% ",linkColor:"#ff0000 !important"}}},ee="@hsReader/app",ne={SET_THEME:"".concat(ee,"/SET_THEME"),SHOW_MAIN_SETTINGS:"".concat(ee,"/SHOW_MAIN_SETTINGS")},te={setTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.theme;return localStorage.setItem("preferences.theme",n.name),{type:ne.SET_THEME,payload:e}},setSettingsMenuVisibility:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ne.SHOW_MAIN_SETTINGS,payload:e}}},re=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).toggleTheme=e.toggleTheme.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"toggleTheme",value:function(e){var n=this.props,t=n.theme,r=n.setTheme;t.name===Z.dark.name?r(Z.light):r(Z.dark)}},{key:"render",value:function(){var e=this.props.theme;return a.a.createElement(a.a.Fragment,null,a.a.createElement(K,{onClick:this.toggleTheme},a.a.createElement(J,null,e.name===Z.dark.name?a.a.createElement(a.a.Fragment,null,a.a.createElement($,null,"Use light theme"),a.a.createElement(X.b,null)):a.a.createElement(a.a.Fragment,null,a.a.createElement($,null,"Use dark theme"),a.a.createElement(X.a,null)))))}}]),n}(r.Component),ae=Object(h.b)((function(e){return{theme:e.app.theme}}),(function(e){return{setTheme:function(n){return e(te.setTheme({theme:n}))}}}))(re),oe=t(95),ie=t.n(oe);ie.a.initializeApp({apiKey:"AIzaSyDfcR5yjdHobjppOkUJohXwwbIwu4sqjLg",authDomain:"hackernews-reader-eb927.firebaseapp.com",databaseURL:"https://hackernews-reader-eb927.firebaseio.com",projectId:"hackernews-reader-eb927",storageBucket:"hackernews-reader-eb927.appspot.com",messagingSenderId:"791336164376",appId:"1:791336164376:web:e18cfe32406ff9f87c776d"}),ie.a.firestore();var ce=ie.a,ue=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).signUserOut=e.signUserOut.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"signUserOut",value:function(e){ce.auth().signOut()}},{key:"render",value:function(){var e=this.props.firebaseAuth;return a.a.createElement(a.a.Fragment,null,a.a.createElement(K,null,a.a.createElement(J,null,a.a.createElement(a.a.Fragment,null,a.a.createElement($,null,e.displayName),a.a.createElement(q.a,null)))),a.a.createElement(ae,null),a.a.createElement(K,null,a.a.createElement(J,{onClick:this.signUserOut},a.a.createElement(a.a.Fragment,null,a.a.createElement($,null,"Sign-out"),a.a.createElement(q.c,null)))))}}]),n}(r.Component),se=Object(h.b)((function(e){return{firebaseAuth:e.firebase.auth}}),(function(e){return{}}))(ue),le={UPDATE_AUTH_STATE:"".concat("@hsReader/auth","/UPDATE_AUTH_STATE"),CLOSE_LOGIN_MODAL:"".concat("@hsReader/auth","/CLOSE_LOGIN_MODAL"),OPEN_LOGIN_MODAL:"".concat("@hsReader/auth","/OPEN_LOGIN_MODAL")},fe=function(e,n){return{type:e,payload:n}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n(fe(le.UPDATE_AUTH_STATE,e))}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n(fe(le.CLOSE_LOGIN_MODAL,e))}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n(fe(le.OPEN_LOGIN_MODAL,e))}},me=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).openLoginPrompt=e.openLoginPrompt.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"openLoginPrompt",value:function(){this.props.openLoginModal()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(K,null,a.a.createElement(J,{onClick:this.openLoginPrompt},a.a.createElement($,null,"Login with Google"),a.a.createElement(q.b,null))),a.a.createElement(ae,null))}}]),n}(r.Component),ge=Object(h.b)((function(e){return{loginModalOpen:e.auth.loginModalOpen}}),(function(e){return{openLoginModal:function(){return e(pe({}))}}}))(me),be=t(67),Se=t(30),Ee=function(e){return Object(Se.isLoaded)(e.firebase.auth)},Oe=Object(be.a)(Ee,(function(e){return Object(Se.isEmpty)(e.firebase.auth)}),(function(e,n){return e&&n})),ye=Object(be.a)(Ee,(function(e){return e})),ve=t(226),_e=t.n(ve),Te=t(93);function je(){var e=Object(p.a)(["\nwidth: 20rem;\nheight: 100%;\ndisplay: flex;\njustify-content: center;\npadding-top: 20rem;\n"]);return je=function(){return e},e}var xe=t.n(Te).a.styled(je()),Ce=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).openLoginPrompt=e.openLoginPrompt.bind(Object(S.a)(e)),e.closeLoginPrompt=e.closeLoginPrompt.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"closeLoginPrompt",value:function(){this.props.closeLoginModal()}},{key:"openLoginPrompt",value:function(){this.props.openLoginModal()}},{key:"render",value:function(){var e=this,n=this.props.loginModalOpen,t={signInFlow:"popup",signInOptions:[ce.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return e.closeLoginPrompt(),!1}}};return a.a.createElement(xe,{isOpen:n,onBackgroundClick:this.closeLoginPrompt,onEscapeKeydown:this.closeLoginPrompt,allowScroll:!0},a.a.createElement(_e.a,{uiConfig:t,firebaseAuth:ce.auth()}))}},{key:"componentDidMount",value:function(){var e=this.props.onAuthChanged;this.unregisterAuthObserver=ce.auth().onAuthStateChanged(e)}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}}]),n}(r.Component),Ie=Object(h.b)((function(e){return{theme:e.app.theme,isAuthenticated:Oe(e),isAuthLoaded:ye(e),firebaseReducer:e.firebase,loginModalOpen:e.auth.loginModalOpen}}),(function(e){return{onAuthChanged:function(n){return e(he({user:n}))},openLoginModal:function(){return e(pe({}))},closeLoginModal:function(){return e(de({}))}}}))(Ce),ke=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).showSettingsMenu=e.showSettingsMenu.bind(Object(S.a)(e)),e.hideSettingsMenu=e.hideSettingsMenu.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"hideSettingsMenu",value:function(){this.props.setSettingsMenuVisibility(!1)}},{key:"showSettingsMenu",value:function(){this.props.setSettingsMenuVisibility(!0)}},{key:"render",value:function(){var e=this.props,n=e.firebaseAuth,t=e.mainMenuVisible,r=n.isLoaded,o=n.isEmpty,i=r&&!o,c=r&&o;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Y,{mainMenuVisible:t},a.a.createElement(Q,{onMouseEnter:this.showSettingsMenu,onMouseLeave:this.hideSettingsMenu},a.a.createElement(W,null,i&&a.a.createElement(se,null),c&&a.a.createElement(ge,null)))),a.a.createElement(Ie,null))}}]),n}(r.Component),Ae=Object(h.b)((function(e){return{theme:e.app.theme,mainMenuVisible:e.app.mainMenuVisible,firebaseAuth:e.firebase.auth,firebaseProfile:e.firebase.profile}}),(function(e){return{setTheme:function(n){return e(te.setTheme({theme:n}))},setSettingsMenuVisibility:function(n){return e(te.setSettingsMenuVisibility({visible:n}))}}}))(ke),Pe=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).showSettingsMenu=e.showSettingsMenu.bind(Object(S.a)(e)),e.hideSettingsMenu=e.hideSettingsMenu.bind(Object(S.a)(e)),e.toggleSettingsMenu=e.toggleSettingsMenu.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"hideSettingsMenu",value:function(){this.props.setSettingsMenuVisibility(!1)}},{key:"showSettingsMenu",value:function(){this.props.setSettingsMenuVisibility(!0)}},{key:"toggleSettingsMenu",value:function(){var e=this.props.mainMenuVisible;this.props.setSettingsMenuVisibility(!e)}},{key:"render",value:function(){return a.a.createElement(I,null,a.a.createElement(P,{href:"/"},a.a.createElement(D,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M20.496 9.026c-2.183-.93-5.116-1.53-8.25-1.695-.5-.03-.987-.04-1.45-.04 2.318-2.83 4.802-4.73 6.437-4.79.322-.013.595.055.813.196.706.458.905 1.768.545 3.59-.04.25.12.493.36.54.25.05.49-.11.54-.36.45-2.28.12-3.846-.94-4.538-.38-.248-.84-.365-1.35-.346-2.05.077-4.94 2.3-7.59 5.72-1.154.035-2.24.13-3.232.287-.646-2.897-.39-4.977.594-5.477.138-.073.285-.11.457-.124.697-.054 1.66.395 2.71 1.27.194.16.486.14.646-.06a.458.458 0 00-.06-.645C9.466 1.51 8.304 1 7.354 1.07a2.244 2.244 0 00-.803.22c-1.19.607-1.67 2.327-1.37 4.838.07.52.16 1.062.29 1.62C2.19 8.404.1 9.718.01 11.372c-.06 1.17.865 2.284 2.68 3.222a.46.46 0 10.42-.816C1.66 13.032.88 12.19.927 11.42c.05-1.08 1.772-2.19 4.76-2.78.27.994.62 2.032 1.05 3.09-1.018 1.888-1.756 3.747-2.137 5.4-.56 2.465-.26 4.22.86 4.948.36.234.78.35 1.247.35.935 0 2.067-.46 3.347-1.372a.458.458 0 10-.53-.746c-1.544 1.103-2.844 1.472-3.562 1.003-.76-.495-.926-1.943-.46-3.976.32-1.386.907-2.93 1.708-4.52.2.438.41.876.63 1.313 1.425 2.796 3.17 5.227 4.91 6.845 1.386 1.29 2.674 1.963 3.735 1.963.35 0 .68-.075.976-.223 1.145-.585 1.64-2.21 1.398-4.575-.224-2.213-1.06-4.91-2.354-7.6a.46.46 0 00-.83.396c2.69 5.602 2.88 10.19 1.37 10.96-1.59.813-5.424-2.355-8.39-8.18-.34-.655-.637-1.3-.9-1.93.34-.608.7-1.22 1.095-1.83.395-.604.806-1.188 1.224-1.745h.394c.54 0 1.126.01 1.734.048 6.53.343 10.975 2.56 10.884 4.334-.04.765-.924 1.538-2.425 2.12a.464.464 0 00-.26.596.455.455 0 00.593.262c1.905-.74 2.95-1.756 3.01-2.93.07-1.33-1.17-2.61-3.5-3.6v-.01zM8.08 9.45c-.27.415-.52.827-.764 1.244a23.66 23.66 0 01-.723-2.215c.713-.11 1.485-.19 2.31-.24-.28.39-.554.794-.82 1.21v-.01zm3.925 1.175a1.375 1.375 0 100 2.75 1.375 1.375 0 100-2.75z"})),a.a.createElement(k,null,"HKS Reader")),a.a.createElement(F,null,a.a.createElement(M,{onMouseEnter:this.showSettingsMenu,onMouseLeave:this.hideSettingsMenu},a.a.createElement(w,null,a.a.createElement(q.d,{onClick:this.toggleSettingsMenu})),a.a.createElement(Ae,null))))}}]),n}(r.Component),Fe=Object(h.b)((function(e){return{theme:e.app.theme,mainMenuVisible:e.app.mainMenuVisible}}),(function(e){return{setSettingsMenuVisibility:function(n){return e(te.setSettingsMenuVisibility({visible:n}))}}}))(Pe);function Re(){var e=Object(p.a)(["\n  text-align: center;\n  span {\n    color: ",";\n    display: inline-block;\n    margin-left: 4px;\n    margin-right: 4px;\n    font-size: 80px;\n    line-height: 0.1;\n\n    ","\n  }\n"]);return Re=function(){return e},e}function we(){var e=Object(p.a)(["\n  /**\n   * Use the blink animation, which is defined above\n   */\n  animation-name: ",";\n  /**\n   * The total time of animation\n   */\n  animation-duration: 1s;\n  /**\n   * It will repeat itself forever\n   */\n  animation-iteration-count: infinite;\n  /**\n   * This makes sure that the starting style (opacity: .2)\n   * of the animation is applied before the animation starts.\n   * Otherwise we would see a short flash or would have\n   * to set the default styling of the dots to the same\n   * as the animation. Same applies for the ending styles.\n   */\n  animation-fill-mode: both;\n\n  &:nth-child(2) {\n    animation-delay: 0.2s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.4s;\n  }\n"]);return we=function(){return e},e}function De(){var e=Object(p.a)(["\n  /**\n  * At the start of the animation the dot\n  * has an opacity of .2\n  */\n  0% {\n    opacity: .2;\n  }\n  /**\n  * At 20% the dot is fully visible and\n  * then fades out slowly\n  */\n  20% {\n    opacity: 1;\n  }\n  /**\n  * Until it reaches an opacity of .2 and\n  * the animation can start again\n  */\n  100% {\n    opacity: .2;\n  }\n"]);return De=function(){return e},e}var Me=Object(d.keyframes)(De()),Le=Object(d.css)(we(),Me),He=d.default.div(Re(),(function(e){return e.theme.text.secondary}),Le),Ue=function(){return a.a.createElement("div",null,a.a.createElement(He,null,a.a.createElement("span",null,"."),a.a.createElement("span",null,"."),a.a.createElement("span",null,".")))},Be=t(16),Ge=t(228),Ne=t.n(Ge),Ve=Object({NODE_ENV:"production",PUBLIC_URL:"/hackernews-reader",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL||"http://localhost:3000",ze={"Content-Type":"application/json",Accept:"application/json"},Ye="https://hacker-news.firebaseio.com/v0",Qe=new(function(){function e(n){var t=n.baseURL,r=void 0===t?Ve:t,a=n.timeout,o=void 0===a?2e4:a,i=n.headers,u=void 0===i?ze:i,s=n.auth;Object(c.a)(this,e);var l=Ne.a.create({baseURL:r,timeout:o,headers:u,auth:s});l.interceptors.response.use(this.handleSuccess,this.handleError),this.client=l}return Object(u.a)(e,[{key:"handleSuccess",value:function(e){return e}},{key:"handleError",value:function(e){return Promise.reject(e)}},{key:"get",value:function(e){return this.client.get(e).then((function(e){return e.data}))}},{key:"post",value:function(e,n){return this.client.post(e,n).then((function(e){return e.data}))}},{key:"put",value:function(e,n){return this.client.put(e,n).then((function(e){return e.data}))}},{key:"patch",value:function(e,n){return this.client.patch(e,n).then((function(e){return e.data}))}},{key:"delete",value:function(e){return this.client.delete(e).then((function(e){return e.data}))}}]),e}())({baseURL:Ye}),We="toFetch",Ke="fetching",Je="fetched",$e={fetchTopStoriesIDs:function(){return Qe.get("".concat(Ye,"/topstories").concat(".json?print=pretty"))},fetchStory:function(e){return Qe.get("".concat(Ye,"/item/").concat(e,"/").concat(".json?print=pretty"))},getPageStoryIDs:function(e,n){var t=$e.getPageRange(20,n),r=t.start,a=t.end;return $e.getPageItems(e,r,a)},fetchStoriesByPage:function(e,n){var t=$e.getPageStoryIDs(e,n);if(t){var r=t.map((function(e){return $e.fetchStory(e)}));return Promise.all(r)}return Promise.resolve([])},fetchStoriesIdsAsync:function(e){return e.map((function(e){return $e.fetchStory(e)}))},splitStoryIDsIntoPages:function(e,n){var t=n||20;return e.map((function(n,r){return r%t===0?e.slice(r,r+t):null})).filter((function(e){return e})).map((function(e,n){return{index:n,storyIDs:e,status:We}}))},getPageRange:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{start:e*n,end:e*(n+1)}},getPageItems:function(e,n,t){return e.slice(n,t)},getUserDetailLink:function(e){return"https://news.ycombinator.com/user?id=".concat(e)},getStoryCommentURL:function(e){return"https://news.ycombinator.com/item?id=".concat(e)}},qe=$e,Xe={FETCH_TOP_STORY_IDS_REQUEST:"".concat("@hnReader/Story","/FETCH_TOP_STORY_IDS_REQUEST"),FETCH_TOP_STORY_IDS_SUCCESS:"".concat("@hnReader/Story","/FETCH_TOP_STORY_IDS_SUCCESS"),FETCH_TOP_STORY_IDS_FAILURE:"".concat("@hnReader/Story","/FETCH_TOP_STORY_IDS_FAILURE"),FETCH_PAGE_BATCH_STORY_IDS_REQUEST:"".concat("@hnReader/Story","/FETCH_PAGE_BATCH_STORY_IDS_REQUEST"),FETCH_PAGE_BATCH_STORY_IDS_SUCCESS:"".concat("@hnReader/Story","/FETCH_PAGE_BATCH_STORY_IDS_SUCCESS"),FETCH_PAGE_BATCH_STORY_IDS_FAILURE:"".concat("@hnReader/Story","/FETCH_PAGE_BATCH_STORY_IDS_FAILURE"),FETCH_PAGE_BATCHES_REQUEST:"".concat("@hnReader/Story","/FETCH_PAGE_BATCHES_REQUEST"),FETCH_PAGE_BATCHES_SUCCESS:"".concat("@hnReader/Story","/FETCH_PAGE_BATCHES_SUCCESS"),FETCH_PAGE_BATCHES_FAILURE:"".concat("@hnReader/Story","/FETCH_PAGE_BATCHES_FAILURE"),FETCH_PAGE_BATCH_STORIES_REQUEST:"".concat("@hnReader/Story","/FETCH_PAGE_BATCH_STORIES_REQUEST"),FETCH_PAGE_BATCH_STORIES_SUCCESS:"".concat("@hnReader/Story","/FETCH_PAGE_BATCH_STORIES_SUCCESS"),RELOAD_STORIES:"".concat("@hnReader/Story","/RELOAD_STORIES")},Ze=function(e,n){return{type:e,payload:n}},en={reloadStories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n(Ze(Xe.RELOAD_STORIES,e))}},fetchStoryPages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={payload:e};return function(t){return t(Ze(Xe.FETCH_TOP_STORY_IDS_REQUEST,e)),qe.fetchTopStoriesIDs().then((function(e){var r=qe.splitStoryIDsIntoPages(e);t(Ze(Xe.FETCH_TOP_STORY_IDS_SUCCESS,{storyIDs:e,pages:r})),n&&t(en.fetchBatchesForPage({storyIDs:e,pageIndex:0}))})).catch((function(e){t(Ze(Xe.FETCH_TOP_STORY_IDS_FAILURE,e))}))}},fetchBatchStoriesFromStoryIDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var t=e.batchStoryIDs,r=e.pageIndex;n(Ze(Xe.FETCH_PAGE_BATCH_STORIES_REQUEST,Object(Be.a)({},e,{pageIndex:r,batchStoryIDs:t})));var a=t.map((function(e){return qe.fetchStory(e)}));return Promise.all(a).then((function(t){var r=Object(Be.a)({},e,{batchStories:t});n(Ze(Xe.FETCH_PAGE_BATCH_STORIES_SUCCESS,r))}))}},fetchBatchesForPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n(Ze(Xe.FETCH_PAGE_BATCHES_REQUEST,e));var t=e.storyIDs,r=e.pageIndex,a=qe.getPageStoryIDs(t,r);n(Ze(Xe.FETCH_PAGE_BATCHES_SUCCESS,Object(Be.a)({},e,{pageStoryIDs:a})))}}},nn=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"getNextPageToFetch",value:function(e){var n=e.find((function(e){return e.status!==Je}));return n?n.index:-1}},{key:"getFetchedPages",value:function(e){return e.filter((function(e){return e.status===Je}))}},{key:"getPageBatches",value:function(e){var n=e.stories||[];return e.storyIDs.map((function(n,t){return t%5===0?e.storyIDs.slice(t,t+5):null})).filter((function(e){return e})).map((function(t,r){return{index:5*e.index+r,batchStoryIDs:t,batchStories:n.slice(e.index,e.index+5)}}))}}]),e}(),tn=Object(be.a)((function(e){var n=e.story.pages;return n?n.map((function(e){return e.index})):0}),(function(e){var n=e.story.pages;return n?n.filter((function(e){return e.status===Je})).map((function(e){return e.index})):0}),(function(e,n){return e.length>n.length})),rn=t(229);function an(){var e=Object(p.a)(["\n  background-color: ",";\n  border-radius: 4px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n\n  margin-before: 1em;\n  margin-after: 1em;\n  margin-start: 0;\n  margin-end: 0;\n  margin: 0;\n"]);return an=function(){return e},e}var on=d.default.ul(an(),(function(e){return e.theme.backgroundSecondary})),cn=t(230),un=t.n(cn);function sn(){var e=Object(p.a)(["\n  color: ",";\n"]);return sn=function(){return e},e}function ln(){var e=Object(p.a)(["\n  color: ",";\n  &:visited {\n    color: ",";\n  }\n"]);return ln=function(){return e},e}function fn(){var e=Object(p.a)(["\n  font-size: 12px;\n  color: ",";\n"]);return fn=function(){return e},e}function hn(){var e=Object(p.a)(["\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n    h1,\n    h2,\n    h3,\n    span {\n      color: ",";\n    }\n  }\n"]);return hn=function(){return e},e}function dn(){var e=Object(p.a)(["\n  color: ",";\n  font-size: 12px;\n"]);return dn=function(){return e},e}function pn(){var e=Object(p.a)(["\n  color: ",";\n  margin-top: 0;\n  margin-bottom: 6px;\n  font-weight: 400;\n  font-size: 16px;\n  letter-spacing: 0.4px;\n  margin-right: 5px;\n"]);return pn=function(){return e},e}function mn(){var e=Object(p.a)(["\n      ","\n    "]);return mn=function(){return e},e}function gn(){var e=Object(p.a)(["\n  border-bottom: 1px solid ",";\n  border-top: 1px solid ",";\n\n  flex-flow: row wrap;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  ","\n\n  &:hover {\n    filter: brightness(",");\n  }\n"]);return gn=function(){return e},e}function bn(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 14px 0 14px 14px;\n  justify-content: center;\n  flex: 1;\n\n  "," {\n    padding: 12px 0 12px 6px;\n  }\n"]);return bn=function(){return e},e}function Sn(){var e=Object(p.a)(["\n  background-color: ",";\n\n  color: #ff6600;\n  margin-top: 5px;\n\n  display: inline-block;\n  border-radius: 10%;\n  padding: 1px 6px;\n  text-align: center;\n  font-style: normal;\n  font-size: 12px;\n  line-height: 1.45;\n\n  "," {\n    line-height: 1;\n  }\n\n  &:after {\n    margin-top: -0.13rem;\n    margin-left: 0.07rem;\n    border-width: 0.6rem 0.66rem 0 0;\n  }\n"]);return Sn=function(){return e},e}function En(){var e=Object(p.a)(["\n  min-width: 80px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  flex-direction: column;\n  background-color: ",";\n  padding: 14px;\n\n  "," {\n    min-width: 60px;\n    padding: 12px;\n  }\n"]);return En=function(){return e},e}function On(){var e=Object(p.a)(["\n  font-size: 12px;\n  color: ",";\n"]);return On=function(){return e},e}var yn=d.default.div(On(),(function(e){return e.theme.hot.primary})),vn=d.default.div(En(),(function(e){return e.theme.hot.primary}),(function(e){return e.theme.background.secondary}),m),_n=d.default.div(Sn(),(function(e){return e.theme.chatbox.background}),m),Tn=d.default.div(bn(),m),jn=d.default.li(gn(),(function(e){return e.theme.border}),(function(e){return e.theme.border}),(function(e){return e.bogusLoader&&Object(d.css)(mn(),Le)}),(function(e){return e.theme.hover.brightness})),xn=d.default.h3(pn(),(function(e){return e.theme.text.primary})),Cn=d.default.span(dn(),(function(e){return e.theme.text.secondary})),In=d.default.a(hn(),(function(e){return e.theme.text.primary}),(function(e){return e.theme.hover.linkColor}),(function(e){return e.theme.hover.linkColor})),kn=d.default.div(fn(),(function(e){return e.theme.text.secondary})),An=d.default.a(ln(),(function(e){return e.theme.text.secondary}),(function(e){return e.theme.text.secondary})),Pn=d.default.div(sn(),(function(e){return e.theme.text.secondary})),Fn=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.story,t=e.bogusLoader,r=1e3*n.time,o=function(e){var n=void 0;if(e){var t=e.match(/^https:\/\/([^/?#]+)(?:[/?#]|$)/i);n=t&&t[1]}return n}(n.url),i=qe.getStoryCommentURL(n.id);return a.a.createElement(jn,{bogusLoader:t},a.a.createElement(In,{href:i},a.a.createElement(vn,null,a.a.createElement(yn,{href:i,rel:"nofollow noreferrer noopener",target:"_blank"},n.score),a.a.createElement(_n,null,a.a.createElement(Pn,{href:i,rel:"nofollow noreferrer noopener",target:"_blank"}," ",n.descendants)))),a.a.createElement(Tn,null,a.a.createElement(In,{href:n.url,rel:"nofollow noreferrer noopener",target:"_blank"},a.a.createElement(xn,null,n.title)),a.a.createElement(kn,null,a.a.createElement(An,{href:qe.getUserDetailLink(n.by),rel:"nofollow noreferrer noopener",target:"_blank"},n.by," "," | "),a.a.createElement("time",{dateTime:new Date(r).toISOString()},un()(r)),o&&a.a.createElement(Cn,null," | "," ",o))))}}]),n}(r.Component),Rn=Object(h.b)((function(e){return{}}),{})(Fn),wn=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.batchStories,t=e.bogusLoader;return a.a.createElement(a.a.Fragment,null,n&&n.map((function(e){return a.a.createElement(Rn,{key:e.id,story:e,bogusLoader:t})})))}}]),n}(r.Component),Dn=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.batchStories,t=e.bogusLoader,r=e.batchIndex,o=e.batchStoryIDs,i=e.fetchedStories,c=n;return c&&0!==n.length||(c=[],i&&(c=o.filter((function(e){return e in i})).map((function(e){return i[e]})))),a.a.createElement(wn,{batchStories:c,batchIndex:r,key:r,bogusLoader:t})}},{key:"componentDidMount",value:function(){var e=this.props,n=e.batchStories,t=e.batchStoryIDs,r=e.fetchBatchStoriesFromStoryIDs,a=e.batchIndex,o=e.pageIndex;n&&0!==n.length||r(t,a,o)}}]),n}(r.Component),Mn=Object(h.b)((function(e){var n=e.story.fetchedStories;return{theme:e.app.theme,fetchedStories:n}}),(function(e){return{fetchBatchStoriesFromStoryIDs:function(n,t,r){return e(en.fetchBatchStoriesFromStoryIDs({batchStoryIDs:n,batchIndex:t,pageIndex:r}))}}}))(Dn),Ln=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.page,t=e.bogusLoader,r=nn.getPageBatches(n);return a.a.createElement(on,{bogusLoader:t},r&&r.map((function(e){return a.a.createElement(Mn,{batchStoryIDs:e.batchStoryIDs,pageIndex:n.index,batchStories:e.batchStories,batchIndex:e.index,key:e.index,bogusLoader:t})})))}}]),n}(r.Component),Hn=function(e){function n(){var e;return Object(c.a)(this,n),(e=Object(s.a)(this,Object(l.a)(n).call(this))).fetchNextPage=e.fetchNextPage.bind(Object(S.a)(e)),e.refreshData=e.refreshData.bind(Object(S.a)(e)),e}return Object(f.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.pagesFetched,t=e.fetchStoryPages;n||t()}},{key:"componentDidUpdate",value:function(){}},{key:"fetchNextPage",value:function(e){var n=this.props,t=n.nextPageToFetch,r=n.fetchBatchesForPage,a=n.storyIDs;t>=0&&r(a,t)}},{key:"refreshData",value:function(){var e=this.props,n=e.fetchStoryPages;(0,e.reloadStories)(),n()}},{key:"render",value:function(){var e=this.props,n=e.pagedStoriesFetched,t=e.hasMorePages;return a.a.createElement(rn.a,{dataLength:n.length,next:this.fetchNextPage,hasMore:t,loader:a.a.createElement(Ue,null),refreshFunction:this.refreshData,pullDownToRefresh:!0,style:{height:"100%",overflow:"visible"}},n&&n.map((function(e){return a.a.createElement(Ln,{key:e.index,page:e})})),!n&&a.a.createElement(Ue,null))}}]),n}(r.Component),Un=Object(h.b)((function(e){var n=e.story,t=n.pages;return{theme:e.app.theme,storyIDs:n.storyIDs,hasMorePages:tn(e),isFetching:n.isFetching,pagedStoriesFetched:nn.getFetchedPages(t),nextPageToFetch:nn.getNextPageToFetch(t),pagesFetched:n.pagesFetched,pages:n.pages}}),(function(e){return{fetchBatchesForPage:function(n,t){return e(en.fetchBatchesForPage({storyIDs:n,pageIndex:t}))},fetchStoryPages:function(){return e(en.fetchStoryPages({fetchFirstPage:!0}))},reloadStories:function(){return e(en.reloadStories())}}}))(Hn),Bn=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.theme,t=e.firebaseReducer.auth,r=t.isLoaded;return a.a.createElement(d.ThemeProvider,{theme:n},a.a.createElement(Te.ModalProvider,null,a.a.createElement(b,null,a.a.createElement(Fe,{firebaseAuth:t}),a.a.createElement(Un,null)),r&&a.a.createElement(Ue,null)))}},{key:"componentDidMount",value:function(){this.setBodyBackgroundColor()}},{key:"componentDidUpdate",value:function(){this.setBodyBackgroundColor()}},{key:"setBodyBackgroundColor",value:function(){document.body.style="background-color: ".concat(this.props.theme.background.primary,";")}}]),n}(r.Component),Gn=Object(h.b)((function(e){return{theme:e.app.theme,firebaseReducer:e.firebase}}),(function(e){return{}}))(Bn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Nn(){var e=Object(p.a)(["\n    * {\n        box-sizing: border-box;\n    };\n\n    html, body {\n        font-family: Lato,Helvetica-Neue,Helvetica,Arial,sans-serif;\n        width: 100vw;\n        margin: 0;\n        padding: 0;\n      }\n      ul {\n        list-style: none;\n        padding: 0;\n      }\n      a {\n        text-decoration: none;\n        &:visited {\n          color: inherit;\n        }\n      }\n"]);return Nn=function(){return e},e}var Vn=Object(d.createGlobalStyle)(Nn()),zn=t(29),Yn=t(231),Qn=(t(232),t(94)),Wn=[];Wn.push(Yn.a.withExtraArgument(Se.getFirebase,Qn.getFirestore));var Kn=Object(zn.d)(zn.a.apply(void 0,Wn)),Jn=function(){var e=localStorage.getItem("preferences.theme");return e?{theme:Z[e],mainMenuVisible:!1}:{theme:Z.dark,mainMenuVisible:!1}},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn(),n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.payload;switch(t){case ne.SHOW_MAIN_SETTINGS:var a=r.visible;return Object(Be.a)({},e,{mainMenuVisible:a});case ne.SET_THEME:return Object(Be.a)({},e,{},r);default:return e}},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{storyIDs:[],pages:[],error:"",isFetching:!1,pagesFetched:!1,fetchedStories:{}},n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.payload;switch(t){case Xe.RELOAD_STORIES:return{storyIDs:[],pages:[],error:"",isFetching:!1,pagesFetched:!1,fetchedStories:{}};case Xe.FETCH_TOP_STORY_IDS_REQUEST:return Object(Be.a)({},e,{isFetching:!0});case Xe.FETCH_PAGE_STORIES_BATCH_REQUEST:case Xe.FETCH_PAGE_STORIES_REQUEST:var a=r.pageIndex;return e.pages[a].status=Ke,Object(Be.a)({},e,{isFetching:!0});case Xe.FETCH_PAGE_BATCH_STORIES_SUCCESS:var o=r.batchStories;return o.map((function(n){e.fetchedStories[n.id]=n})),Object(Be.a)({},e,{isFetching:!1});case Xe.FETCH_TOP_STORY_IDS_SUCCESS:var i=r.pages,c="undefined"!==typeof i&&0!==i.length;return Object(Be.a)({},e,{},r,{isFetching:!1,pagesFetched:c});case Xe.FETCH_PAGE_BATCHES_SUCCESS:var u=r.pageStoryIDs,s=r.pageIndex;return e.pages[s].storyIDs=u,e.pages[s].status=Je,Object(Be.a)({},e,{isFetching:!1});default:return e}},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginModalOpen:!1},n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.payload;switch(t){case le.UPDATE_AUTH_STATE:var a=r.user;return Object(Be.a)({},e,{user:a});case le.CLOSE_LOGIN_MODAL:return Object(Be.a)({},e,{loginModalOpen:!1});case le.OPEN_LOGIN_MODAL:return Object(Be.a)({},e,{loginModalOpen:!0});default:return e}},Zn=Object(zn.c)({app:$n,story:qn,auth:Xn,firebase:Se.firebaseReducer}),et=function(e){return Object(zn.e)(Zn,e,Kn)};!function(){var e=et();var n={firebase:ce,config:{userProfile:"users",useFirestoreForProfile:!0,enableLogging:!1},dispatch:e.dispatch,createFirestoreInstance:Qn.createFirestoreInstance};i.a.render(a.a.createElement(h.a,{store:e},a.a.createElement(Se.ReactReduxFirebaseProvider,n,a.a.createElement("div",null,a.a.createElement(Vn,null),a.a.createElement(Gn,null)))),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[235,1,2]]]);
//# sourceMappingURL=main.f22023c2.chunk.js.map