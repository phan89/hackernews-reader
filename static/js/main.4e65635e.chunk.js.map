{"version":3,"sources":["styles/mediaQueries.js","components/App/style.js","components/Navigation/styles.js","components/Settings/styles.js","styles/palette.js","store/app/actions.js","components/Settings/commonSettings.js","config/firebase/index.js","components/Settings/signedInSettings.js","store/auth/actions.js","components/Settings/signedOutSettings.js","store/auth/selectors.js","components/Auth/styles.js","components/Auth/signInScreen.js","components/Settings/index.js","components/Navigation/index.js","utils/Utils.js","components/Loader/styles.js","components/Loader/index.js","services/API.js","services/hackernewsAPI.js","store/story/actions.js","store/story/utils.js","store/story/selectors.js","components/Stories/StoryPage/styles.js","components/Stories/StoryItem/styles.js","components/Stories/StoryItem/index.js","components/Stories/StoryBatch/index.js","components/Stories/StoryPage/index.js","components/Stories/StoryPagesCollection/index.js","components/App/index.js","serviceWorker.js","styles/globals.js","store/middleware.js","store/app/reducer.js","store/story/reducer.js","store/auth/reducer.js","store/reducer.js","store/index.js","index.js"],"names":["tablet","Wrapper","styled","div","Header","header","theme","background","secondary","border","Title","h1","text","primary","Link","a","MainLink","Nav","Action","SettingsAction","Logo","svg","logo","color","DropdownMenuContainer","DropdownMenuOuterWrapper","mainMenuVisible","DropdownMenuInnerWrapper","box_shadow","DropdownMenu","ul","DropdownMenuItem","li","ActionLabel","span","themes","dark","name","disabled","hot","warning","error","chatbox","hover","brightness","linkColor","light","primaryHover","NS","actionTypes","SET_THEME","SHOW_MAIN_SETTINGS","appActions","setTheme","payload","localStorage","setItem","type","setSettingsMenuVisibility","CommonSettingsComponents","toggleTheme","bind","evt","this","props","Fragment","onClick","Component","CommonSettings","connect","state","app","dispatch","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","SignedInSettingsComponent","signUserOut","auth","signOut","firebaseAuth","displayName","SignedInSettings","UPDATE_AUTH_STATE","CLOSE_LOGIN_MODAL","OPEN_LOGIN_MODAL","defaultAction","authActions","SignedOutSettingsComponent","openLoginPrompt","openLoginModal","SignedOutSettings","loginModalOpen","isAuthLoadedSelector","isLoaded","authenticatedSelector","createSelector","isEmpty","isAutLoaded","hasAuth","authLoadedSelector","SignInModal","Modal","SignInScreen","closeLoginPrompt","closeLoginModal","uiConfig","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","isOpen","onBackgroundClick","onEscapeKeydown","allowScroll","onAuthChanged","unregisterAuthObserver","onAuthStateChanged","isAuthenticated","isAuthLoaded","firebaseReducer","user","MainSettingsMenuComponent","showSettingsMenu","hideSettingsMenu","isSignedIn","isSignedOut","onMouseEnter","onMouseLeave","MainSettingsMenu","firebaseProfile","profile","visible","NavBar","toggleSettingsMenu","isMobile","check","navigator","userAgent","vendor","window","opera","test","substr","isMobileOrTablet","href","viewBox","xmlns","d","blink","keyframes","AnimitedBlink","css","Animation","Loader","API_ROOT","process","URL","HEADERS","Accept","BASE_URL","API_CLIENT","baseURL","timeout","headers","client","axios","create","interceptors","response","use","handleSuccess","handleError","Promise","reject","path","get","then","data","post","put","patch","delete","PAGE_STATUS","hackerNewsApi","fetchTopStoriesIDs","fetchStory","id","getPageStoryIDs","ids","page","getPageRange","start","end","getPageItems","fetchStoriesByPage","pageIDs","storyPromises","map","all","resolve","fetchStoriesIdsAsync","storyIDs","splitStoryIDsIntoPages","chunkSize","pageSize","item","idx","slice","filter","e","pageStoryIDs","pageIndex","index","status","limit","items","getUserDetailLink","userID","getStoryCommentURL","storyID","FETCH_TOP_STORY_IDS_REQUEST","FETCH_TOP_STORY_IDS_SUCCESS","FETCH_TOP_STORY_IDS_FAILURE","FETCH_PAGE_BATCH_STORY_IDS_REQUEST","FETCH_PAGE_BATCH_STORY_IDS_SUCCESS","FETCH_PAGE_BATCH_STORY_IDS_FAILURE","FETCH_PAGE_BATCHES_REQUEST","FETCH_PAGE_BATCHES_SUCCESS","FETCH_PAGE_BATCHES_FAILURE","FETCH_PAGE_BATCH_STORIES_REQUEST","FETCH_PAGE_BATCH_STORIES_SUCCESS","RELOAD_STORIES","storyActions","reloadStories","fetchStoryPages","fetchFirstPage","pages","fetchBatchesForPage","catch","err","fetchBatchStoriesFromStoryIDs","batchStoryIDs","batchStoryPromises","batchStories","successPayload","Utils","toFetchPage","find","stories","batchIndex","hasMorePagesSelector","story","totalPages","fetchedPages","length","StoryPageWrapper","backgroundSecondary","BoxScore","HotBox","ChatBox","ContentBox","StoryListItem","bogusLoader","h3","Host","ExternalLink","Description","SimpleLink","CommentLink","StoryItem","postedTime","time","domainHost","url","domain","undefined","urlMatches","match","getHostFromURL","commentURL","hackernewsAPI","rel","target","score","descendants","title","by","dateTime","Date","toISOString","timeago","StoryBatch","key","StoryBatchWrapper","fetchedStories","effectiveStories","StoryPage","batches","getPageBatches","batch","StoryPagesCollection","fetchNextPage","refreshData","pagesFetched","nextPageToFetch","pagedStoriesFetched","hasMorePages","dataLength","next","hasMore","loader","refreshFunction","pullDownToRefresh","style","height","overflow","storyReducer","isFetching","getFetchedPages","getNextPageToFetch","App","setBodyBackgroundColor","document","body","Boolean","location","hostname","GlobalStyles","createGlobalStyle","middlewares","push","thunk","withExtraArgument","getFirebase","getFirestore","middleware","compose","applyMiddleware","getInitialState","lastSavedTheme","getItem","FETCH_PAGE_STORIES_BATCH_REQUEST","FETCH_PAGE_STORIES_REQUEST","rootReducer","combineReducers","configureStore","initialState","createStore","reducer","store","rrfProps","config","userProfile","useFirestoreForProfile","enableLogging","createFirestoreInstance","ReactDOM","render","getElementById","renderApp","serviceWorker","ready","registration","unregister","console","message"],"mappings":"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","file":"static/js/main.4e65635e.chunk.js","sourcesContent":["export const mobile = '@media only screen and (max-width: 480px)';\nexport const tablet = '@media only screen and (max-width: 768px)';\nexport const desktop = '@media only screen and (min-width: 1440px)';\n","import styled from 'styled-components';\nimport { tablet } from 'styles/mediaQueries';\n\nexport const Wrapper = styled.div`\n  width: 50%;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  overflow: hidden;\n  padding-bottom: 200px;\n  ${tablet} {\n    width: 96%;\n  }\n`;\n","import styled from 'styled-components';\nimport { tablet, desk } from 'styles/mediaQueries';\n\n// Header, Link, Logo, Nav, Action\n\nconst HEADER_HEIGHT = 60;\nconst LOGO_WIDTH = 36;\nconst LOGO_HEIGHT = 36;\nconst ACTION_BUTTON_FONT_SIZE = 28;\n\nexport const Header = styled.header`\n  background-color: ${({ theme }) => theme.background.secondary};\n  height: ${HEADER_HEIGHT}px;\n  width: 100%;\n  display: flex;\n  padding: 12px;\n  border-bottom: solid 1px ${({ theme }) => theme.border};\n  padding-right: 0px;\n`;\n\nexport const Title = styled.h1`\n  color: ${({ theme }) => theme.text.primary};\n  font-size: 22px;\n  ${tablet} {\n    font-size: 18px;\n  }\n  font-weight: 400;\n  display: flex;\n  text-align: center;\n  align-items: center;\n  margin-left: 10px;\n`;\n\nexport const Link = styled.a`\n  display: flex;\n`;\n\nexport const MainLink = styled(Link)`\nfloat: left; \nwidth: 400px;\n}\n`;\n\nexport const Nav = styled.div`\n  display: flex;\n  order: 2;\n  width: 100%;\n  max-width: 12em;\n  margin-left: auto;\n`;\n\nexport const Action = styled.div`\n  display: flex;\n  cursor: pointer;\n  font-size: ${ACTION_BUTTON_FONT_SIZE}px;\n  color: ${({ theme }) => theme.text.secondary};\n  align-items: center;\n  text-align: center;\n  margin-top: 0.1em;\n\n  > a {\n    display: flex;\n    color: ${({ theme }) => theme.text.secondary};\n  }\n`;\n\nexport const SettingsAction = styled(Action)`\n  margin-left: auto;\n  margin-right: 0.5em;\n`;\n\nexport const Logo = styled.svg`\n  width: ${LOGO_WIDTH}px;\n  height: ${LOGO_HEIGHT}px;\n  fill: ${({ theme }) => theme.logo.color};\n`;\n\nexport const DropdownMenuContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-left: auto;\n  width: 100%;\n`;\n","import styled from 'styled-components';\n\nconst ACTION_BUTTON_FONT_SIZE = 14;\nconst ACTION_LABEL_FONT_SIZE = 14;\n\nexport const DropdownMenuOuterWrapper = styled.div`\n  display: ${({ mainMenuVisible }) => (mainMenuVisible ? 'flex' : 'none')};\n  flex-direction: column;\n  background: transparent;\n  padding-top: 20px;\n  z-index: 1000;\n  padding-right: 0.05em;\n`;\n\nexport const DropdownMenuInnerWrapper = styled.div`\n  padding-right: 0.5em;\n  flex-direction: column;\n  box-shadow: -1px 3px 10px 1px ${({ theme }) => theme.box_shadow};\n  background-color: ${({ theme }) => theme.background.primary};\n`;\n\nexport const DropdownMenu = styled.ul`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const DropdownMenuItem = styled.li`\n  margin-left: auto;\n  padding: 0 0 12px 16px;\n`;\n\nexport const Action = styled.div`\n  display: flex;\n  cursor: pointer;\n  font-size: ${ACTION_BUTTON_FONT_SIZE}px;\n  color: ${({ theme }) => theme.text.secondary};\n  align-items: center;\n  text-align: center;\n  padding-right: 6px;\n\n  > a {\n    display: flex;\n    color: ${({ theme }) => theme.text.secondary};\n  }\n`;\nexport const UserDisplayNameContainer = styled.div`\n  display: flex;\n  padding: 0 8px;\n`;\n\nexport const UserDisplayName = styled.span`\n  font-size: ${ACTION_LABEL_FONT_SIZE}px;\n`;\n\nexport const ActionLabel = styled.span`\n  font-size: ${ACTION_LABEL_FONT_SIZE}px;\n  margin-right: 4px;\n`;\n","export const darkTheme = {\n  name: 'dark',\n  background: {\n    primary: '#000',\n    secondary: '#0d0a08',\n  },\n\n  text: {\n    primary: '#bfbebe',\n    secondary: '#848886',\n    disabled: '',\n  },\n\n  hot: {\n    primary: '#ff0000',\n    secondary: '#af0404',\n  },\n\n  warning: {\n    primary: '#bfbebe',\n    secondary: '#848886',\n  },\n\n  error: {\n    primary: '#bfbebe',\n    secondary: '#848886',\n  },\n\n  border: '#272727',\n\n  box_shadow: '#4B4B4B',\n\n  logo: {\n    color: '#f57b51',\n  },\n\n  chatbox: {\n    background: '#331400',\n  },\n\n  hover: {\n    brightness: '200%',\n    linkColor: '',\n  },\n};\n\nexport const lightTheme = {\n  name: 'light',\n  background: {\n    primary: '#f9f9f9',\n    secondary: '#f3f3f3',\n  },\n\n  text: {\n    primary: '#000000',\n    secondary: '#0f4c81',\n    disabled: '',\n    primaryHover: '#ff0000',\n  },\n  hot: {\n    primary: '#ff0000',\n    secondary: '#af0404',\n  },\n\n  warning: {\n    primary: '#bfbebe',\n    secondary: '#848886',\n  },\n\n  error: {\n    primary: '#bfbebe',\n    secondary: '#848886',\n  },\n\n  border: '#272727',\n\n  box_shadow: '#7d7d7d',\n\n  logo: {\n    color: '#f57b51',\n  },\n\n  chatbox: {\n    background: '#fff0f0',\n  },\n\n  hover: {\n    brightness: '95% ',\n    linkColor: '#ff0000 !important',\n  },\n};\n\nexport const themes = {\n  dark: darkTheme,\n  light: lightTheme,\n};\n","const NS = '@hsReader/app';\n\nexport const LOCAL_STORAGE_PREFERENCE_THEME = 'preferences.theme';\n\nexport const actionTypes = {\n  SET_THEME: `${NS}/SET_THEME`,\n  SHOW_MAIN_SETTINGS: `${NS}/SHOW_MAIN_SETTINGS`,\n};\n\nexport const appActions = {\n  setTheme: (payload = {}) => {\n    const { theme } = payload;\n    localStorage.setItem(LOCAL_STORAGE_PREFERENCE_THEME, theme.name);\n    return { type: actionTypes.SET_THEME, payload };\n  },\n\n  setSettingsMenuVisibility: (payload = {}) => {\n    return { type: actionTypes.SHOW_MAIN_SETTINGS, payload };\n  },\n};\n\nexport default appActions;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { DropdownMenuItem, Action, ActionLabel } from './styles';\nimport { TiWeatherNight, TiWeatherSunny } from 'react-icons/ti';\nimport { themes } from 'styles/palette';\nimport { appActions } from 'store/app/actions';\n\nclass CommonSettingsComponents extends Component {\n  constructor() {\n    super();\n    this.toggleTheme = this.toggleTheme.bind(this);\n  }\n\n  toggleTheme(evt) {\n    const { theme, setTheme } = this.props;\n    if (theme.name === themes.dark.name) {\n      setTheme(themes.light);\n    } else {\n      setTheme(themes.dark);\n    }\n  }\n\n  render() {\n    const { theme } = this.props;\n\n    return (\n      <React.Fragment>\n        <DropdownMenuItem onClick={this.toggleTheme}>\n          <Action>\n            {theme.name === themes.dark.name ? (\n              <React.Fragment>\n                <ActionLabel>Use light theme</ActionLabel>\n                <TiWeatherSunny />\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <ActionLabel>Use dark theme</ActionLabel>\n                <TiWeatherNight />\n              </React.Fragment>\n            )}\n          </Action>\n        </DropdownMenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    theme: state.app.theme,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setTheme: theme => dispatch(appActions.setTheme({ theme })),\n  };\n};\n\nexport const CommonSettings = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CommonSettingsComponents);\n","// Import FirebaseAuth and firebase.\nimport firebase from 'firebase';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDfcR5yjdHobjppOkUJohXwwbIwu4sqjLg',\n  authDomain: 'hackernews-reader-eb927.firebaseapp.com',\n  databaseURL: 'https://hackernews-reader-eb927.firebaseio.com',\n  projectId: 'hackernews-reader-eb927',\n  storageBucket: 'hackernews-reader-eb927.appspot.com',\n  messagingSenderId: '791336164376',\n  appId: '1:791336164376:web:e18cfe32406ff9f87c776d',\n};\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.firestore();\n\nexport default firebase;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { DropdownMenuItem, Action, ActionLabel } from './styles';\n\nimport { GoSignOut, GoPerson } from 'react-icons/go';\nimport { CommonSettings } from './commonSettings';\nimport firebase from 'config/firebase';\n\nclass SignedInSettingsComponent extends Component {\n  constructor() {\n    super();\n    this.signUserOut = this.signUserOut.bind(this);\n  }\n\n  signUserOut(evt) {\n    firebase.auth().signOut();\n  }\n\n  render() {\n    const { firebaseAuth } = this.props;\n    return (\n      <React.Fragment>\n        <DropdownMenuItem>\n          <Action>\n            <React.Fragment>\n              <ActionLabel>{firebaseAuth.displayName}</ActionLabel>\n              <GoPerson />\n            </React.Fragment>\n          </Action>\n        </DropdownMenuItem>\n        <CommonSettings />\n        <DropdownMenuItem>\n          <Action onClick={this.signUserOut}>\n            <React.Fragment>\n              <ActionLabel>Sign-out</ActionLabel>\n              <GoSignOut />\n            </React.Fragment>\n          </Action>\n        </DropdownMenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    firebaseAuth: state.firebase.auth,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport const SignedInSettings = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SignedInSettingsComponent);\n","const NS = '@hsReader/auth';\n\nexport const actionTypes = {\n  UPDATE_AUTH_STATE: `${NS}/UPDATE_AUTH_STATE`,\n  CLOSE_LOGIN_MODAL: `${NS}/CLOSE_LOGIN_MODAL`,\n  OPEN_LOGIN_MODAL: `${NS}/OPEN_LOGIN_MODAL`,\n};\n\nconst defaultAction = (type, payload) => ({ type, payload });\n\nexport const authActions = {\n  updateAuthState: (payload = {}) => {\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.UPDATE_AUTH_STATE, payload));\n    };\n  },\n\n  closeLoginModal: (payload = {}) => {\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.CLOSE_LOGIN_MODAL, payload));\n    };\n  },\n\n  openLoginModal: (payload = {}) => {\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.OPEN_LOGIN_MODAL, payload));\n    };\n  },\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { DropdownMenuItem, Action, ActionLabel } from './styles';\n\nimport { GoSignIn } from 'react-icons/go';\nimport { CommonSettings } from './commonSettings';\nimport { authActions } from 'store/auth/actions';\n\nclass SignedOutSettingsComponent extends Component {\n  constructor() {\n    super();\n    this.openLoginPrompt = this.openLoginPrompt.bind(this);\n  }\n\n  openLoginPrompt() {\n    this.props.openLoginModal();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <DropdownMenuItem>\n          <Action onClick={this.openLoginPrompt}>\n            <ActionLabel>Login with Google</ActionLabel>\n            <GoSignIn />\n          </Action>\n        </DropdownMenuItem>\n        <CommonSettings />\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    loginModalOpen: state.auth.loginModalOpen,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openLoginModal: () => dispatch(authActions.openLoginModal({})),\n  };\n};\n\nexport const SignedOutSettings = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SignedOutSettingsComponent);\n","import { createSelector } from 'reselect';\nimport { isLoaded, isEmpty } from 'react-redux-firebase';\n\nconst isAuthLoadedSelector = state => {\n  return isLoaded(state.firebase.auth);\n};\n\nconst hasAuthSelector = state => {\n  return isEmpty(state.firebase.auth);\n};\n\nexport const authenticatedSelector = createSelector(\n  isAuthLoadedSelector,\n  hasAuthSelector,\n  (isAutLoaded, hasAuth) => {\n    return isAutLoaded && hasAuth;\n  }\n);\n\nexport const authLoadedSelector = createSelector(isAuthLoadedSelector, isAutLoaded => {\n  return isAutLoaded;\n});\n","import Modal from 'styled-react-modal';\n\nexport const SignInModal = Modal.styled`\nwidth: 20rem;\nheight: 100%;\ndisplay: flex;\njustify-content: center;\npadding-top: 20rem;\n`;\n","import React, { Component } from 'react';\nimport { authLoadedSelector, authenticatedSelector } from 'store/auth/selectors';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { connect } from 'react-redux';\nimport firebase from 'config/firebase';\nimport { authActions } from 'store/auth/actions';\nimport { SignInModal } from './styles';\n\nclass SignInScreen extends Component {\n  constructor() {\n    super();\n    this.openLoginPrompt = this.openLoginPrompt.bind(this);\n    this.closeLoginPrompt = this.closeLoginPrompt.bind(this);\n  }\n\n  closeLoginPrompt() {\n    this.props.closeLoginModal();\n  }\n\n  openLoginPrompt() {\n    this.props.openLoginModal();\n  }\n\n  render() {\n    const { loginModalOpen } = this.props;\n\n    // // Configure FirebaseUI.\n    const uiConfig = {\n      // Popup signin flow rather than redirect flow.\n      signInFlow: 'popup',\n      // We will display Google as auth providers.\n      signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n      callbacks: {\n        // Avoid redirects after sign-in.\n        signInSuccessWithAuthResult: () => {\n          this.closeLoginPrompt();\n          return false;\n        },\n      },\n    };\n\n    return (\n      <SignInModal\n        isOpen={loginModalOpen}\n        onBackgroundClick={this.closeLoginPrompt}\n        onEscapeKeydown={this.closeLoginPrompt}\n        allowScroll={true}\n      >\n        <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n      </SignInModal>\n    );\n  }\n\n  componentDidMount() {\n    const { onAuthChanged } = this.props;\n    this.unregisterAuthObserver = firebase.auth().onAuthStateChanged(onAuthChanged);\n  }\n\n  componentWillUnmount() {\n    this.unregisterAuthObserver();\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    theme: state.app.theme,\n    isAuthenticated: authenticatedSelector(state),\n    isAuthLoaded: authLoadedSelector(state),\n    firebaseReducer: state.firebase,\n    loginModalOpen: state.auth.loginModalOpen,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onAuthChanged: user => dispatch(authActions.updateAuthState({ user })),\n    openLoginModal: () => dispatch(authActions.openLoginModal({})),\n    closeLoginModal: () => dispatch(authActions.closeLoginModal({})),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInScreen);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  DropdownMenuOuterWrapper,\n  DropdownMenuInnerWrapper,\n  DropdownMenu,\n} from './styles';\nimport { SignedInSettings } from './signedInSettings';\nimport { SignedOutSettings } from './signedOutSettings';\n\nimport SignInScreen from 'components/Auth/signInScreen';\nimport { appActions } from 'store/app/actions';\n\nclass MainSettingsMenuComponent extends Component {\n  constructor() {\n    super();\n    this.showSettingsMenu = this.showSettingsMenu.bind(this);\n    this.hideSettingsMenu = this.hideSettingsMenu.bind(this);\n  }\n\n  hideSettingsMenu() {\n    this.props.setSettingsMenuVisibility(false);\n  }\n\n  showSettingsMenu() {\n    this.props.setSettingsMenuVisibility(true);\n  }\n\n  render() {\n    const { firebaseAuth, mainMenuVisible } = this.props;\n    const { isLoaded, isEmpty } = firebaseAuth;\n    const isSignedIn = isLoaded && !isEmpty;\n    const isSignedOut = isLoaded && isEmpty;\n\n    return (\n      <React.Fragment>\n        <DropdownMenuOuterWrapper mainMenuVisible={mainMenuVisible}>\n          <DropdownMenuInnerWrapper\n            onMouseEnter={this.showSettingsMenu}\n            onMouseLeave={this.hideSettingsMenu}\n          >\n            <DropdownMenu>\n              {isSignedIn && <SignedInSettings />}\n              {isSignedOut && <SignedOutSettings />}\n            </DropdownMenu>\n          </DropdownMenuInnerWrapper>\n        </DropdownMenuOuterWrapper>\n        <SignInScreen />\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    theme: state.app.theme,\n    mainMenuVisible: state.app.mainMenuVisible,\n    firebaseAuth: state.firebase.auth,\n    firebaseProfile: state.firebase.profile,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setTheme: theme => dispatch(appActions.setTheme({ theme })),\n    setSettingsMenuVisibility: visible =>\n      dispatch(appActions.setSettingsMenuVisibility({ visible: visible })),\n  };\n};\n\nexport const MainSettingsMenu = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MainSettingsMenuComponent);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { isMobileOrTablet } from 'utils/Utils';\nimport {\n  Header,\n  Link,\n  Logo,\n  Nav,\n  SettingsAction,\n  Title,\n  MainLink,\n  DropdownMenuContainer,\n} from './styles';\nimport { MainSettingsMenu } from 'components/Settings';\n\nimport { GoThreeBars } from 'react-icons/go';\n\nimport { appActions } from 'store/app/actions';\n\nclass NavBar extends Component {\n  constructor() {\n    super();\n\n    this.showSettingsMenu = this.showSettingsMenu.bind(this);\n    this.hideSettingsMenu = this.hideSettingsMenu.bind(this);\n    this.toggleSettingsMenu = this.toggleSettingsMenu.bind(this);\n  }\n\n  hideSettingsMenu() {\n    this.props.setSettingsMenuVisibility(false);\n  }\n\n  showSettingsMenu() {\n    this.props.setSettingsMenuVisibility(true);\n  }\n\n  toggleSettingsMenu() {\n    const { mainMenuVisible } = this.props;\n    this.props.setSettingsMenuVisibility(!mainMenuVisible);\n  }\n\n  render() {\n    // to avoid conflict between onMouseEnter/onClick events in mobile devices, only set one binding per device type\n    const isMobile = isMobileOrTablet();\n    return (\n      <Header>\n        <MainLink href='/'>\n          <Logo viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n            <path d='M20.496 9.026c-2.183-.93-5.116-1.53-8.25-1.695-.5-.03-.987-.04-1.45-.04 2.318-2.83 4.802-4.73 6.437-4.79.322-.013.595.055.813.196.706.458.905 1.768.545 3.59-.04.25.12.493.36.54.25.05.49-.11.54-.36.45-2.28.12-3.846-.94-4.538-.38-.248-.84-.365-1.35-.346-2.05.077-4.94 2.3-7.59 5.72-1.154.035-2.24.13-3.232.287-.646-2.897-.39-4.977.594-5.477.138-.073.285-.11.457-.124.697-.054 1.66.395 2.71 1.27.194.16.486.14.646-.06a.458.458 0 00-.06-.645C9.466 1.51 8.304 1 7.354 1.07a2.244 2.244 0 00-.803.22c-1.19.607-1.67 2.327-1.37 4.838.07.52.16 1.062.29 1.62C2.19 8.404.1 9.718.01 11.372c-.06 1.17.865 2.284 2.68 3.222a.46.46 0 10.42-.816C1.66 13.032.88 12.19.927 11.42c.05-1.08 1.772-2.19 4.76-2.78.27.994.62 2.032 1.05 3.09-1.018 1.888-1.756 3.747-2.137 5.4-.56 2.465-.26 4.22.86 4.948.36.234.78.35 1.247.35.935 0 2.067-.46 3.347-1.372a.458.458 0 10-.53-.746c-1.544 1.103-2.844 1.472-3.562 1.003-.76-.495-.926-1.943-.46-3.976.32-1.386.907-2.93 1.708-4.52.2.438.41.876.63 1.313 1.425 2.796 3.17 5.227 4.91 6.845 1.386 1.29 2.674 1.963 3.735 1.963.35 0 .68-.075.976-.223 1.145-.585 1.64-2.21 1.398-4.575-.224-2.213-1.06-4.91-2.354-7.6a.46.46 0 00-.83.396c2.69 5.602 2.88 10.19 1.37 10.96-1.59.813-5.424-2.355-8.39-8.18-.34-.655-.637-1.3-.9-1.93.34-.608.7-1.22 1.095-1.83.395-.604.806-1.188 1.224-1.745h.394c.54 0 1.126.01 1.734.048 6.53.343 10.975 2.56 10.884 4.334-.04.765-.924 1.538-2.425 2.12a.464.464 0 00-.26.596.455.455 0 00.593.262c1.905-.74 2.95-1.756 3.01-2.93.07-1.33-1.17-2.61-3.5-3.6v-.01zM8.08 9.45c-.27.415-.52.827-.764 1.244a23.66 23.66 0 01-.723-2.215c.713-.11 1.485-.19 2.31-.24-.28.39-.554.794-.82 1.21v-.01zm3.925 1.175a1.375 1.375 0 100 2.75 1.375 1.375 0 100-2.75z'></path>\n          </Logo>\n          <Title>HKS Reader</Title>\n        </MainLink>\n        <Nav>\n          <DropdownMenuContainer\n            onMouseEnter={!isMobile ? this.showSettingsMenu : null}\n            onMouseLeave={!isMobile ? this.hideSettingsMenu : null}\n          >\n            <SettingsAction>\n              <GoThreeBars onClick={isMobile ? this.toggleSettingsMenu : null} />\n            </SettingsAction>\n            <MainSettingsMenu />\n          </DropdownMenuContainer>\n        </Nav>\n      </Header>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    theme: state.app.theme,\n    mainMenuVisible: state.app.mainMenuVisible,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSettingsMenuVisibility: visible =>\n      dispatch(appActions.setSettingsMenuVisibility({ visible: visible })),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);\n","export const getHostFromURL = url => {\n  let domain = undefined;\n  if (url) {\n    const urlMatches = url.match(/^https:\\/\\/([^/?#]+)(?:[/?#]|$)/i);\n    domain = urlMatches && urlMatches[1]; // domain will be null if no match is found\n  }\n\n  return domain;\n};\n\nexport const isMobileOrTablet = () => {\n  var check = false;\n  (function(a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\n","import styled, { keyframes, css } from 'styled-components';\n\nconst blink = keyframes`\n  /**\n  * At the start of the animation the dot\n  * has an opacity of .2\n  */\n  0% {\n    opacity: .2;\n  }\n  /**\n  * At 20% the dot is fully visible and\n  * then fades out slowly\n  */\n  20% {\n    opacity: 1;\n  }\n  /**\n  * Until it reaches an opacity of .2 and\n  * the animation can start again\n  */\n  100% {\n    opacity: .2;\n  }\n`;\n\nexport const AnimitedBlink = css`\n  /**\n   * Use the blink animation, which is defined above\n   */\n  animation-name: ${blink};\n  /**\n   * The total time of animation\n   */\n  animation-duration: 1s;\n  /**\n   * It will repeat itself forever\n   */\n  animation-iteration-count: infinite;\n  /**\n   * This makes sure that the starting style (opacity: .2)\n   * of the animation is applied before the animation starts.\n   * Otherwise we would see a short flash or would have\n   * to set the default styling of the dots to the same\n   * as the animation. Same applies for the ending styles.\n   */\n  animation-fill-mode: both;\n\n  &:nth-child(2) {\n    animation-delay: 0.2s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.4s;\n  }\n`;\n\nexport const Animation = styled.div`\n  text-align: center;\n  span {\n    color: ${({ theme }) => theme.text.secondary};\n    display: inline-block;\n    margin-left: 4px;\n    margin-right: 4px;\n    font-size: 80px;\n    line-height: 0.1;\n\n    ${AnimitedBlink}\n  }\n`;\n","import React from 'react';\nimport { Animation } from './styles';\n\nconst Loader = () => {\n  return (\n    <div>\n      <Animation>\n        <span>.</span>\n        <span>.</span>\n        <span>.</span>\n      </Animation>\n    </div>\n  );\n};\n\nexport default Loader;\n","import axios from 'axios';\n\nconst API_ROOT = process.env.URL || 'http://localhost:3000';\nconst TIMEOUT = 20000;\nconst HEADERS = {\n  'Content-Type': 'application/json',\n  Accept: 'application/json',\n};\n\nclass ApiService {\n  constructor({ baseURL = API_ROOT, timeout = TIMEOUT, headers = HEADERS, auth }) {\n    const client = axios.create({\n      baseURL,\n      timeout,\n      headers,\n      auth,\n    });\n\n    client.interceptors.response.use(this.handleSuccess, this.handleError);\n    this.client = client;\n  }\n\n  handleSuccess(response) {\n    return response;\n  }\n\n  handleError(error) {\n    return Promise.reject(error);\n  }\n\n  get(path) {\n    return this.client.get(path).then(response => response.data);\n  }\n\n  post(path, payload) {\n    return this.client.post(path, payload).then(response => response.data);\n  }\n\n  put(path, payload) {\n    return this.client.put(path, payload).then(response => response.data);\n  }\n\n  patch(path, payload) {\n    return this.client.patch(path, payload).then(response => response.data);\n  }\n\n  delete(path) {\n    return this.client.delete(path).then(response => response.data);\n  }\n}\n\nexport default ApiService;\n","import ApiService from './API';\n\nconst BASE_URL = 'https://hacker-news.firebaseio.com/v0';\nconst API_POST_FIX = '.json?print=pretty';\n\nconst PAGE_LIMIT = 20;\nconst API_CLIENT = new ApiService({ baseURL: BASE_URL });\n\nexport const PAGE_STATUS = {\n  TO_FETCH: 'toFetch',\n  FETCHING: 'fetching',\n  FETCHED: 'fetched',\n};\n\nconst hackerNewsApi = {\n  fetchTopStoriesIDs: () => {\n    return API_CLIENT.get(`${BASE_URL}/topstories${API_POST_FIX}`);\n  },\n\n  fetchStory: id => {\n    return API_CLIENT.get(`${BASE_URL}/item/${id}/${API_POST_FIX}`);\n  },\n\n  getPageStoryIDs: (ids, page) => {\n    const { start, end } = hackerNewsApi.getPageRange(PAGE_LIMIT, page);\n    const pageIDs = hackerNewsApi.getPageItems(ids, start, end);\n    return pageIDs;\n  },\n\n  fetchStoriesByPage: (ids, page) => {\n    const pageIDs = hackerNewsApi.getPageStoryIDs(ids, page);\n    if (pageIDs) {\n      const storyPromises = pageIDs.map(id => hackerNewsApi.fetchStory(id));\n      return Promise.all(storyPromises);\n    } else {\n      return Promise.resolve([]);\n    }\n  },\n\n  fetchStoriesIdsAsync: storyIDs => {\n    const storyPromises = storyIDs.map(id => hackerNewsApi.fetchStory(id));\n    return storyPromises;\n  },\n\n  splitStoryIDsIntoPages: (storyIDs, chunkSize) => {\n    const pageSize = chunkSize || PAGE_LIMIT;\n    const pages = storyIDs\n      .map((item, idx) =>\n        idx % pageSize === 0 ? storyIDs.slice(idx, idx + pageSize) : null\n      )\n      .filter(e => e)\n      .map((pageStoryIDs, pageIndex) => {\n        return {\n          index: pageIndex,\n          storyIDs: pageStoryIDs,\n          status: PAGE_STATUS.TO_FETCH,\n        };\n      });\n    return pages;\n  },\n\n  getPageRange: (limit, page = 0) => {\n    return { start: limit * page, end: limit * (page + 1) };\n  },\n\n  getPageItems: (items, start, end) => {\n    return items.slice(start, end);\n  },\n\n  getUserDetailLink: userID => {\n    return `https://news.ycombinator.com/user?id=${userID}`;\n  },\n\n  getStoryCommentURL: storyID => {\n    return `https://news.ycombinator.com/item?id=${storyID}`;\n  },\n};\n\nexport default hackerNewsApi;\n","import hackerNewsApi from 'services/hackernewsAPI';\n\nconst NS = `@hnReader/Story`;\nexport const actionTypes = {\n  FETCH_TOP_STORY_IDS_REQUEST: `${NS}/FETCH_TOP_STORY_IDS_REQUEST`,\n  FETCH_TOP_STORY_IDS_SUCCESS: `${NS}/FETCH_TOP_STORY_IDS_SUCCESS`,\n  FETCH_TOP_STORY_IDS_FAILURE: `${NS}/FETCH_TOP_STORY_IDS_FAILURE`,\n\n  FETCH_PAGE_BATCH_STORY_IDS_REQUEST: `${NS}/FETCH_PAGE_BATCH_STORY_IDS_REQUEST`,\n  FETCH_PAGE_BATCH_STORY_IDS_SUCCESS: `${NS}/FETCH_PAGE_BATCH_STORY_IDS_SUCCESS`,\n  FETCH_PAGE_BATCH_STORY_IDS_FAILURE: `${NS}/FETCH_PAGE_BATCH_STORY_IDS_FAILURE`,\n\n  FETCH_PAGE_BATCHES_REQUEST: `${NS}/FETCH_PAGE_BATCHES_REQUEST`,\n  FETCH_PAGE_BATCHES_SUCCESS: `${NS}/FETCH_PAGE_BATCHES_SUCCESS`,\n  FETCH_PAGE_BATCHES_FAILURE: `${NS}/FETCH_PAGE_BATCHES_FAILURE`,\n\n  FETCH_PAGE_BATCH_STORIES_REQUEST: `${NS}/FETCH_PAGE_BATCH_STORIES_REQUEST`,\n  FETCH_PAGE_BATCH_STORIES_SUCCESS: `${NS}/FETCH_PAGE_BATCH_STORIES_SUCCESS`,\n\n  RELOAD_STORIES: `${NS}/RELOAD_STORIES`,\n};\n\nconst defaultAction = (type, payload) => ({ type, payload });\nexport const BATCH_SIZE = 5;\n\nexport const storyActions = {\n  reloadStories: (payload = {}) => {\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.RELOAD_STORIES, payload));\n    };\n  },\n\n  fetchStoryPages: (payload = {}) => {\n    const fetchFirstPage = { payload };\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.FETCH_TOP_STORY_IDS_REQUEST, payload));\n      return hackerNewsApi\n        .fetchTopStoriesIDs()\n        .then(storyIDs => {\n          const pages = hackerNewsApi.splitStoryIDsIntoPages(storyIDs);\n          dispatch(\n            defaultAction(actionTypes.FETCH_TOP_STORY_IDS_SUCCESS, {\n              storyIDs,\n              pages,\n            })\n          );\n          if (fetchFirstPage) {\n            dispatch(storyActions.fetchBatchesForPage({ storyIDs, pageIndex: 0 }));\n          }\n        })\n        .catch(err => {\n          dispatch(defaultAction(actionTypes.FETCH_TOP_STORY_IDS_FAILURE, err));\n        });\n    };\n  },\n\n  fetchBatchStoriesFromStoryIDs: (payload = {}) => {\n    return dispatch => {\n      const { batchStoryIDs, pageIndex } = payload;\n      dispatch(\n        defaultAction(actionTypes.FETCH_PAGE_BATCH_STORIES_REQUEST, {\n          ...payload,\n          pageIndex,\n          batchStoryIDs,\n        })\n      );\n      const batchStoryPromises = batchStoryIDs.map(id => hackerNewsApi.fetchStory(id));\n      return Promise.all(batchStoryPromises).then(batchStories => {\n        const successPayload = { ...payload, batchStories: batchStories };\n        dispatch(\n          defaultAction(actionTypes.FETCH_PAGE_BATCH_STORIES_SUCCESS, successPayload)\n        );\n      });\n    };\n  },\n\n  fetchBatchesForPage: (payload = {}) => {\n    return dispatch => {\n      dispatch(defaultAction(actionTypes.FETCH_PAGE_BATCHES_REQUEST, payload));\n\n      const { storyIDs, pageIndex } = payload;\n      const pageStoryIDs = hackerNewsApi.getPageStoryIDs(storyIDs, pageIndex);\n\n      dispatch(\n        defaultAction(actionTypes.FETCH_PAGE_BATCHES_SUCCESS, {\n          ...payload,\n          pageStoryIDs,\n        })\n      );\n    };\n  },\n};\n","import { PAGE_STATUS } from 'services/hackernewsAPI';\n\nimport { BATCH_SIZE } from 'store/story/actions';\n\nexport default class Utils {\n  static getNextPageToFetch(pages) {\n    const toFetchPage = pages.find(page => page.status !== PAGE_STATUS.FETCHED);\n    if (toFetchPage) {\n      return toFetchPage.index;\n    } else {\n      return -1;\n    }\n  }\n\n  static getFetchedPages(pages) {\n    return pages.filter(page => page.status === PAGE_STATUS.FETCHED);\n  }\n\n  static getPageBatches(page) {\n    const stories = page.stories || [];\n    const batches = page.storyIDs\n      .map((item, idx) =>\n        idx % BATCH_SIZE === 0 ? page.storyIDs.slice(idx, idx + BATCH_SIZE) : null\n      )\n      .filter(e => e)\n      .map((batchStoryIDs, batchIndex) => {\n        return {\n          index: page.index * BATCH_SIZE + batchIndex,\n          batchStoryIDs: batchStoryIDs,\n          batchStories: stories.slice(page.index, page.index + BATCH_SIZE),\n        };\n      });\n    return batches;\n  }\n}\n","import { createSelector } from 'reselect';\nimport { PAGE_STATUS } from 'services/hackernewsAPI';\n\nconst fetchedPagesSelector = state => {\n  const { pages } = state.story;\n\n  if (pages) {\n    return pages\n      .filter(page => page.status === PAGE_STATUS.FETCHED)\n      .map(page => page.index);\n  } else {\n    return 0;\n  }\n};\n\nconst totalPagesSelector = state => {\n  const { pages } = state.story;\n  if (pages) {\n    return pages.map(page => page.index);\n  } else {\n    return 0;\n  }\n};\n\nexport const hasMorePagesSelector = createSelector(\n  totalPagesSelector,\n  fetchedPagesSelector,\n  (totalPages, fetchedPages) => {\n    return totalPages.length > fetchedPages.length;\n  }\n);\n","import styled from 'styled-components';\n\nexport const StoryPageWrapper = styled.ul`\n  background-color: ${({ theme }) => theme.backgroundSecondary};\n  border-radius: 4px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n\n  margin-before: 1em;\n  margin-after: 1em;\n  margin-start: 0;\n  margin-end: 0;\n  margin: 0;\n`;\n","import styled, { css } from 'styled-components';\nimport { AnimitedBlink } from 'components/Loader/styles';\nimport { mobile, tablet } from 'styles/mediaQueries';\n\nexport const BoxScore = styled.div`\n  font-size: 12px;\n  color: ${({ theme }) => theme.hot.primary};\n`;\n\nexport const HotBox = styled.div`\n  min-width: 80px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme }) => theme.hot.primary};\n  flex-direction: column;\n  background-color: ${({ theme }) => theme.background.secondary};\n  padding: 14px;\n\n  ${tablet} {\n    min-width: 60px;\n    padding: 12px;\n  }\n`;\n\nexport const ChatBox = styled.div`\n  background-color: ${({ theme }) => theme.chatbox.background};\n\n  color: #ff6600;\n  margin-top: 5px;\n\n  display: inline-block;\n  border-radius: 10%;\n  padding: 1px 6px;\n  text-align: center;\n  font-style: normal;\n  font-size: 12px;\n  line-height: 1.45;\n\n  ${tablet} {\n    line-height: 1;\n  }\n\n  &:after {\n    margin-top: -0.13rem;\n    margin-left: 0.07rem;\n    border-width: 0.6rem 0.66rem 0 0;\n  }\n`;\n\nexport const ContentBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 14px 0 14px 14px;\n  justify-content: center;\n  flex: 1;\n\n  ${tablet} {\n    padding: 12px 0 12px 6px;\n  }\n`;\n\nexport const StoryListItem = styled.li`\n  border-bottom: 1px solid ${({ theme }) => theme.border};\n  border-top: 1px solid ${({ theme }) => theme.border};\n\n  flex-flow: row wrap;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  ${({ bogusLoader }) =>\n    bogusLoader &&\n    css`\n      ${AnimitedBlink}\n    `}\n\n  &:hover {\n    filter: brightness(${({ theme }) => theme.hover.brightness});\n  }\n`;\n\nexport const Title = styled.h3`\n  color: ${({ theme }) => theme.text.primary};\n  margin-top: 0;\n  margin-bottom: 6px;\n  font-weight: 400;\n  font-size: 16px;\n  letter-spacing: 0.4px;\n  margin-right: 5px;\n`;\n\nexport const Host = styled.span`\n  color: ${({ theme }) => theme.text.secondary};\n  font-size: 12px;\n`;\n\nexport const ExternalLink = styled.a`\n  color: ${({ theme }) => theme.text.primary};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-decoration: none;\n\n  &:hover {\n    color: ${({ theme }) => theme.hover.linkColor};\n    h1,\n    h2,\n    h3,\n    span {\n      color: ${({ theme }) => theme.hover.linkColor};\n    }\n  }\n`;\n\nexport const Description = styled.div`\n  font-size: 12px;\n  color: ${({ theme }) => theme.text.secondary};\n`;\n\nexport const SimpleLink = styled.a`\n  color: ${({ theme }) => theme.text.secondary};\n  &:visited {\n    color: ${({ theme }) => theme.text.secondary};\n  }\n`;\n\nexport const CommentLink = styled.div`\n  color: ${({ theme }) => theme.text.secondary};\n`;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport timeago from 'epoch-timeago';\n\nimport {\n  ExternalLink,\n  Title,\n  StoryListItem,\n  SimpleLink,\n  BoxScore,\n  Host,\n  CommentLink,\n  Description,\n  HotBox,\n  ContentBox,\n  ChatBox,\n} from './styles';\nimport { getHostFromURL } from 'utils/Utils';\nimport hackernewsAPI from 'services/hackernewsAPI';\n\nclass StoryItem extends Component {\n  render() {\n    const { story, bogusLoader } = this.props;\n    const postedTime = story.time * 1000;\n    const domainHost = getHostFromURL(story.url);\n    const commentURL = hackernewsAPI.getStoryCommentURL(story.id);\n    return (\n      <StoryListItem bogusLoader={bogusLoader}>\n        <ExternalLink href={commentURL}>\n          <HotBox>\n            <BoxScore\n              href={commentURL}\n              rel='nofollow noreferrer noopener'\n              target='_blank'\n            >\n              {story.score}\n            </BoxScore>\n            <ChatBox>\n              <CommentLink\n                href={commentURL}\n                rel='nofollow noreferrer noopener'\n                target='_blank'\n              >\n                {' '}\n                {story.descendants}\n              </CommentLink>\n            </ChatBox>\n          </HotBox>\n        </ExternalLink>\n        <ContentBox>\n          <ExternalLink\n            href={story.url}\n            rel='nofollow noreferrer noopener'\n            target='_blank'\n          >\n            <Title>{story.title}</Title>\n          </ExternalLink>\n          <Description>\n            <SimpleLink\n              href={hackernewsAPI.getUserDetailLink(story.by)}\n              rel='nofollow noreferrer noopener'\n              target='_blank'\n            >\n              {story.by} {' | '}\n            </SimpleLink>\n            <time dateTime={new Date(postedTime).toISOString()}>\n              {timeago(postedTime)}\n            </time>\n            {domainHost && (\n              <Host>\n                {' | '} {domainHost}\n              </Host>\n            )}\n          </Description>\n        </ContentBox>\n      </StoryListItem>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoryItem);\n","import StoryItem from 'components/Stories/StoryItem';\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { storyActions } from 'store/story/actions';\n\nexport class StoryBatch extends Component {\n  render() {\n    const { batchStories, bogusLoader } = this.props;\n    return (\n      <React.Fragment>\n        {batchStories &&\n          batchStories.map(story => (\n            <StoryItem key={story.id} story={story} bogusLoader={bogusLoader}></StoryItem>\n          ))}\n      </React.Fragment>\n    );\n  }\n}\n\nclass StoryBatchWrapper extends Component {\n  render() {\n    const {\n      batchStories,\n      bogusLoader,\n      batchIndex,\n      batchStoryIDs,\n      fetchedStories,\n    } = this.props;\n    let effectiveStories = batchStories;\n    if (!effectiveStories || batchStories.length === 0) {\n      effectiveStories = [];\n      if (fetchedStories) {\n        effectiveStories = batchStoryIDs\n          .filter(storyID => {\n            return storyID in fetchedStories;\n          })\n          .map(storyID => {\n            return fetchedStories[storyID];\n          });\n      }\n    }\n\n    return (\n      <StoryBatch\n        batchStories={effectiveStories}\n        batchIndex={batchIndex}\n        key={batchIndex}\n        bogusLoader={bogusLoader}\n      ></StoryBatch>\n    );\n  }\n\n  componentDidMount() {\n    const {\n      batchStories,\n      batchStoryIDs,\n      fetchBatchStoriesFromStoryIDs,\n      batchIndex,\n      pageIndex,\n    } = this.props;\n    if (!batchStories || batchStories.length === 0) {\n      fetchBatchStoriesFromStoryIDs(batchStoryIDs, batchIndex, pageIndex);\n    }\n  }\n}\n\nconst mapStateToWrapperProps = state => {\n  const storyReducer = state.story;\n  const fetchedStories = storyReducer.fetchedStories;\n  return {\n    theme: state.app.theme,\n    fetchedStories: fetchedStories,\n  };\n};\n\nconst mapDispatchToWrapperProps = dispatch => {\n  return {\n    fetchBatchStoriesFromStoryIDs: (batchStoryIDs, batchIndex, pageIndex) =>\n      dispatch(\n        storyActions.fetchBatchStoriesFromStoryIDs({\n          batchStoryIDs,\n          batchIndex,\n          pageIndex,\n        })\n      ),\n  };\n};\n\nexport default connect(\n  mapStateToWrapperProps,\n  mapDispatchToWrapperProps\n)(StoryBatchWrapper);\n","import React, { Component } from 'react';\nimport { StoryPageWrapper } from './styles';\nimport StoryBatchWrapper from '../StoryBatch';\nimport Utils from 'store/story/utils';\n\nclass StoryPage extends Component {\n  render() {\n    const { page, bogusLoader } = this.props;\n    const batches = Utils.getPageBatches(page);\n    return (\n      <StoryPageWrapper bogusLoader={bogusLoader}>\n        {batches &&\n          batches.map(batch => (\n            <StoryBatchWrapper\n              batchStoryIDs={batch.batchStoryIDs}\n              pageIndex={page.index}\n              batchStories={batch.batchStories}\n              batchIndex={batch.index}\n              key={batch.index}\n              bogusLoader={bogusLoader}\n            ></StoryBatchWrapper>\n          ))}\n      </StoryPageWrapper>\n    );\n  }\n}\n\nexport default StoryPage;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Loader from 'components/Loader';\n\nimport { storyActions } from 'store/story/actions';\nimport Utils from 'store/story//utils';\n\nimport { hasMorePagesSelector } from 'store/story/selectors';\n\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport StoryPage from '../StoryPage';\n\nclass StoryPagesCollection extends Component {\n  constructor() {\n    super();\n    this.fetchNextPage = this.fetchNextPage.bind(this);\n    this.refreshData = this.refreshData.bind(this);\n  }\n\n  // override zones\n  componentDidMount() {\n    const { pagesFetched, fetchStoryPages } = this.props;\n    if (!pagesFetched) {\n      fetchStoryPages();\n    }\n  }\n\n  componentDidUpdate() {}\n\n  fetchNextPage(evt) {\n    const { nextPageToFetch, fetchBatchesForPage, storyIDs } = this.props;\n    if (nextPageToFetch >= 0) {\n      fetchBatchesForPage(storyIDs, nextPageToFetch);\n    }\n  }\n\n  refreshData() {\n    const { fetchStoryPages, reloadStories } = this.props;\n    reloadStories();\n    fetchStoryPages();\n  }\n\n  render() {\n    const { pagedStoriesFetched, hasMorePages } = this.props;\n    return (\n      <InfiniteScroll\n        dataLength={pagedStoriesFetched.length}\n        next={this.fetchNextPage}\n        hasMore={hasMorePages}\n        loader={<Loader />}\n        refreshFunction={this.refreshData}\n        pullDownToRefresh={true}\n        style={{ height: '100%', overflow: 'visible' }}\n      >\n        {pagedStoriesFetched &&\n          pagedStoriesFetched.map(page => {\n            return <StoryPage key={page.index} page={page} />;\n          })}\n\n        {!pagedStoriesFetched && <Loader></Loader>}\n      </InfiniteScroll>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const storyReducer = state.story;\n\n  const { pages } = storyReducer;\n  return {\n    theme: state.app.theme,\n    storyIDs: storyReducer.storyIDs,\n    hasMorePages: hasMorePagesSelector(state),\n    isFetching: storyReducer.isFetching,\n    pagedStoriesFetched: Utils.getFetchedPages(pages),\n    nextPageToFetch: Utils.getNextPageToFetch(pages),\n    pagesFetched: storyReducer.pagesFetched,\n    pages: storyReducer.pages,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchBatchesForPage: (storyIDs, pageIndex) =>\n      dispatch(storyActions.fetchBatchesForPage({ storyIDs, pageIndex })),\n    fetchStoryPages: () =>\n      dispatch(storyActions.fetchStoryPages({ fetchFirstPage: true })),\n    reloadStories: () => dispatch(storyActions.reloadStories()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoryPagesCollection);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ThemeProvider } from 'styled-components';\n\nimport { Wrapper } from './style.js';\nimport NavBar from 'components/Navigation';\nimport StoryPagesCollection from 'components/Stories/StoryPagesCollection';\nimport { ModalProvider } from 'styled-react-modal';\n\nimport Loader from '../Loader/index.js';\n\nclass App extends Component {\n  render() {\n    const { theme, firebaseReducer } = this.props;\n    const firebaseAuth = firebaseReducer.auth;\n    const isAuthLoaded = firebaseAuth.isLoaded;\n    return (\n      <ThemeProvider theme={theme}>\n        <ModalProvider>\n          <Wrapper>\n            <NavBar firebaseAuth={firebaseAuth} />\n            <StoryPagesCollection />\n          </Wrapper>\n          {isAuthLoaded && <Loader />}\n        </ModalProvider>\n      </ThemeProvider>\n    );\n  }\n\n  componentDidMount() {\n    this.setBodyBackgroundColor();\n  }\n\n  componentDidUpdate() {\n    this.setBodyBackgroundColor();\n  }\n\n  setBodyBackgroundColor() {\n    document.body.style = `background-color: ${this.props.theme.background.primary};`;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    theme: state.app.theme,\n    firebaseReducer: state.firebase,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyles = createGlobalStyle`\n    * {\n        box-sizing: border-box;\n    };\n\n    html, body {\n        font-family: Lato,Helvetica-Neue,Helvetica,Arial,sans-serif;\n        width: 100vw;\n        margin: 0;\n        padding: 0;\n      }\n      ul {\n        list-style: none;\n        padding: 0;\n      }\n      a {\n        text-decoration: none;\n        &:visited {\n          color: inherit;\n        }\n      }\n`;\n\nexport default GlobalStyles;\n","import thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { compose, applyMiddleware } from 'redux';\nimport { getFirestore } from 'redux-firestore';\nimport { getFirebase } from 'react-redux-firebase';\n\nconst isProd = process.env.NODE_ENV === 'production';\nconst middlewares = [];\n\nmiddlewares.push(thunk.withExtraArgument(getFirebase, getFirestore));\n\nif (!isProd) {\n  middlewares.push(createLogger());\n}\n\nconst middleware = compose(applyMiddleware(...middlewares));\n\nexport default middleware;\n","import { actionTypes, LOCAL_STORAGE_PREFERENCE_THEME } from './actions';\n\nimport { themes } from 'styles/palette';\n\nconst getInitialState = () => {\n  // maybe the one currently store in the local storage?\n  const lastSavedTheme = localStorage.getItem(LOCAL_STORAGE_PREFERENCE_THEME);\n\n  if (lastSavedTheme) {\n    return { theme: themes[lastSavedTheme], mainMenuVisible: false };\n  } else {\n    return { theme: themes.dark, mainMenuVisible: false };\n  }\n};\n\nconst app = (state = getInitialState(), { type, payload }) => {\n  switch (type) {\n    case actionTypes.SHOW_MAIN_SETTINGS: {\n      const { visible } = payload;\n      return {\n        ...state,\n        mainMenuVisible: visible,\n      };\n    }\n    case actionTypes.SET_THEME:\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default app;\n","import { actionTypes } from './actions';\nimport { PAGE_STATUS } from 'services/hackernewsAPI';\n\nconst initialState = () => ({\n  storyIDs: [],\n  pages: [],\n  error: '',\n  isFetching: false,\n  pagesFetched: false,\n  fetchedStories: {},\n});\n\nconst story = (state = initialState(), { type, payload }) => {\n  switch (type) {\n    case actionTypes.RELOAD_STORIES: {\n      return initialState();\n    }\n    case actionTypes.FETCH_TOP_STORY_IDS_REQUEST: {\n      return {\n        ...state,\n        isFetching: true,\n      };\n    }\n    case actionTypes.FETCH_PAGE_STORIES_BATCH_REQUEST:\n    case actionTypes.FETCH_PAGE_STORIES_REQUEST: {\n      const { pageIndex } = payload;\n      state.pages[pageIndex].status = PAGE_STATUS.FETCHING;\n      return {\n        ...state,\n        isFetching: true,\n      };\n    }\n    case actionTypes.FETCH_PAGE_BATCH_STORIES_SUCCESS: {\n      const { batchStories } = payload;\n      batchStories.map(story => {\n        state.fetchedStories[story.id] = story;\n      });\n      return {\n        ...state,\n        isFetching: false,\n      };\n    }\n    case actionTypes.FETCH_TOP_STORY_IDS_SUCCESS:\n      const { pages } = payload;\n      const pagesFetched = typeof pages !== 'undefined' && pages.length !== 0;\n\n      return {\n        ...state,\n        ...payload,\n        isFetching: false,\n        pagesFetched: pagesFetched,\n      };\n\n    case actionTypes.FETCH_PAGE_BATCHES_SUCCESS:\n      const { pageStoryIDs, pageIndex } = payload;\n\n      state.pages[pageIndex].storyIDs = pageStoryIDs;\n      state.pages[pageIndex].status = PAGE_STATUS.FETCHED;\n      return {\n        ...state,\n        isFetching: false,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default story;\n","import { actionTypes } from './actions';\n\nconst initialState = () => ({\n  loginModalOpen: false,\n});\n\nconst auth = (state = initialState(), { type, payload }) => {\n  switch (type) {\n    case actionTypes.UPDATE_AUTH_STATE: {\n      const { user } = payload;\n      return {\n        ...state,\n        user: user,\n      };\n    }\n\n    case actionTypes.CLOSE_LOGIN_MODAL: {\n      return {\n        ...state,\n        loginModalOpen: false,\n      };\n    }\n\n    case actionTypes.OPEN_LOGIN_MODAL: {\n      return {\n        ...state,\n        loginModalOpen: true,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport default auth;\n","import { combineReducers } from 'redux';\n\nimport app from 'store/app/reducer';\nimport story from 'store/story/reducer';\nimport auth from 'store/auth/reducer';\nimport { firebaseReducer } from 'react-redux-firebase';\n\nconst rootReducer = combineReducers({\n  app,\n  story,\n  auth,\n  firebase: firebaseReducer,\n});\n\nexport default rootReducer;\n","import { createStore } from 'redux';\nimport middleware from './middleware';\nimport reducer from './reducer';\n\nconst configureStore = initialState => {\n  const store = createStore(reducer, initialState, middleware);\n  return store;\n};\n\nexport default configureStore;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport * as serviceWorker from './serviceWorker';\n\nimport GlobalStyles from 'styles/globals';\nimport configureStore from './store';\nimport { Provider } from 'react-redux';\nimport { ReactReduxFirebaseProvider } from 'react-redux-firebase';\nimport firebase from 'config/firebase';\nimport { createFirestoreInstance } from 'redux-firestore';\n\nconst renderApp = () => {\n  const store = configureStore();\n\n  if (process.env.NODE_ENV !== 'production') {\n  }\n\n  // react redux configs\n  const rrfConfig = {\n    userProfile: 'users',\n    useFirestoreForProfile: true, // Store in Firestore instead of Real Time DB\n    enableLogging: false,\n  };\n  const rrfProps = {\n    firebase,\n    config: rrfConfig,\n    dispatch: store.dispatch,\n    createFirestoreInstance,\n  };\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <ReactReduxFirebaseProvider {...rrfProps}>\n        <div>\n          <GlobalStyles />\n          <App />\n        </div>\n      </ReactReduxFirebaseProvider>\n    </Provider>,\n    document.getElementById('root')\n  );\n};\n\nrenderApp();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}